<!DOCTYPE html>
<html lang="de" translate="yes">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="description" content="Unser MenÃ¼">
    <meta name="keywords" content="MenÃ¼, Speisekarte, Essen, GetrÃ¤nke">
    <meta name="author" content="Juan Carlos Pereyra de Leon">
    <meta name="color-scheme" content="dark light">
    <link rel="icon" href="lounge.ico" type="image/x-icon">
    <link type="text/css" rel="stylesheet" href="main.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Alumni+Sans+Pinstripe:ital@0;1&family=Moon+Dance&family=Onest:wght@100..900&family=Rubik+Moonrocks&family=Story+Script&display=swap" rel="stylesheet">


    <title>Moon Lounge</title>
</head>
<body>
  <div id="conter" class="container">
      <div class="controls">
  <label for="categorySelect" style="display: none;"></label>
  <select name="controls" id="categorySelect" autofocus="false">
    <option value="all">All categories</option>
  </select>

  <input
    type="search"
    id="searchInput"
    placeholder="Search drink..."
  />
</div>


    <span><img src="lounge.jpg" alt="Moon Cafe Bar Lounge" loading="lazy" class="header-image"></span>

<!-- Product list -->
<div id="productList" class="product-list"></div>

<!-- Scroll to top -->
<button id="scrollTopBtn" aria-label="Scroll to top">â†‘</button>
  </div>

 <button id="cartBtn" class="cart-btn" aria-label="Open cart">
    <img src="shopping-bag.png" alt="Cart" width="24" height="24">
  <span id="cartCount">0</span>
</button>
<footer>
  <p class="copy">Â© 2026 Moon Lounge Â· All rights reserved</p>
  <strong>Designed by Le_Million</strong>
</footer>


 <script>
    //Cart Script
    let cart = JSON.parse(localStorage.getItem("cart")) || [];

/* SAVE */
function saveCart() {
  localStorage.setItem("cart", JSON.stringify(cart));
  updateCartCount();
}

/* UPDATE ICON COUNT */
function updateCartCount() {
  document.getElementById("cartCount").textContent = cart.length;
}
updateCartCount();

   let menuData = [];
let categories = [];

/* ELEMENTS */
const categorySelect = document.getElementById("categorySelect");
const searchInput = document.getElementById("searchInput");
const productList = document.getElementById("productList");
const scrollBtn = document.getElementById("scrollTopBtn");

/* LOAD JSON */
fetch("./products.json")
  .then(response => response.json())
  .then(data => {
    menuData = data[0];                // your JSON is inside an array
    categories = Object.keys(menuData);

    initCategories();
    renderProducts();
  })
  .catch(err => console.error("Menu load failed:", err));

/* INIT CATEGORY SELECT */
function initCategories() {
  categories.forEach(cat => {
    const option = document.createElement("option");
    option.value = cat;
    option.textContent = cat;
    categorySelect.appendChild(option);
  });
}

/* RENDER PRODUCTS */
function renderProducts(filterCategory = "all", search = "") {
  productList.innerHTML = "";

  categories.forEach(category => {
    if (filterCategory !== "all" && category !== filterCategory) return;

    // ðŸ” Filter matching products FIRST
    const filteredItems = menuData[category].filter(item => {
      if (!search) return true;
      return item.name.toLowerCase().includes(search.toLowerCase());
    });

    // âŒ Skip category if nothing matches
    if (filteredItems.length === 0) return;

    // âœ… Now render category title
    const h1 = document.createElement("h1");
    h1.textContent = category;
    h1.className = "category-title";
    productList.appendChild(h1);

    // âœ… Render only matching products
    filteredItems.forEach(item => {
      const div = document.createElement("div");
      div.className = "product";

      div.innerHTML = `
        <div class="product-info">
          <strong>${item.name}</strong>
          ${item["GrÃ¶ÃŸe"] ? `<small>${item["GrÃ¶ÃŸe"]}</small>` : ""}
          ${item["Beschreibung"] ? `<small>${item["Beschreibung"]}</small>` : ""}
          ${item.info ? `<small>${item.info}</small>` : ""}
          <span>${item.preis}</span>
        </div>
        <button type="button">+</button>
      `;

      div.querySelector("button").addEventListener("click", () => {
        cart.push({
          name: item.name,
          price: item.preis,
          category
        });
        saveCart();
      });

      productList.appendChild(div);
    });
  });
}



/* EVENTS */
categorySelect.addEventListener("change", () => {
  renderProducts(categorySelect.value, searchInput.value);
});

searchInput.addEventListener("input", () => {
  renderProducts(categorySelect.value, searchInput.value);
});

/* SCROLL TO TOP */
window.addEventListener("scroll", () => {
  scrollBtn.style.display = window.scrollY > 300 ? "block" : "none";
});

scrollBtn.addEventListener("click", () => {
  window.scrollTo({ top: 0, behavior: "smooth" });
});

document.addEventListener("DOMContentLoaded", () => {

const cartBtn = document.getElementById("cartBtn");
const cartModal = document.getElementById("cartModal");
const closeCart = document.getElementById("closeCart");
const cartItems = document.getElementById("cartItems");
const totalPrice = document.getElementById("totalPrice");

cartBtn.addEventListener("click", () => {
  renderCart();
  cartModal.classList.remove("hidden");
});

closeCart.addEventListener("click", () => {
  cartModal.classList.add("hidden");
});

/* Close when clicking outside */
cartModal.addEventListener("click", e => {
  if (e.target === cartModal) {
    cartModal.classList.add("hidden");
  }
});

function renderCart() {
  cartItems.innerHTML = "";
  let total = 0;

  cart.forEach(item => {
    const priceNumber = parseFloat(
      item.price.replace(",", ".")
    );

    total += priceNumber;

    const row = document.createElement("div");
    row.textContent = `${item.name} â€” ${item.price}`;
    cartItems.appendChild(row);
  });

  totalPrice.textContent = `Total: ${total.toFixed(2)} â‚¬`;
}


});
function Empty() {
    cart = [];
    saveCart();
}

   </script>

<div id="cartModal" class="modal hidden">
  <div class="modal-content">
    <button class="close-btn" id="closeCart">âœ•</button>
    <h2>Rechnung</h2>
    <div id="cartItems"></div>
    <hr>
    <strong id="totalPrice"></strong>
    <button class="empty" onclick="Empty()">Leeren</button>
  </div>
</div>
</body>
</html>